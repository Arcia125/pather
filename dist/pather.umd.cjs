(function(o,s){typeof exports=="object"&&typeof module<"u"?s(exports):typeof define=="function"&&define.amd?define(["exports"],s):(o=typeof globalThis<"u"?globalThis:o||self,s(o.pather={}))})(this,function(o){"use strict";var N=Object.defineProperty;var g=(o,s,a)=>s in o?N(o,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[s]=a;var r=(o,s,a)=>(g(o,typeof s!="symbol"?s+"":s,a),a);class s{constructor(t=null,e){r(this,"g",0);r(this,"h",0);r(this,"equals",t=>s.equals(this,t));this.parent=t,this.position=e}static equals(t,e){var i,h,c,l;return!t.position||!e.position?!1:((i=t.position)==null?void 0:i.x)===((h=e.position)==null?void 0:h.x)&&((c=t.position)==null?void 0:c.y)===((l=e.position)==null?void 0:l.y)}get f(){return this.g+this.h}}const a=n=>{const t=[];let e=n;for(;e.parent;)t.push(e),e=e.parent;return t},u=(n,t=!1)=>{const e=n.position.x,i=n.position.y;let h=[{x:0,y:-1},{x:0,y:1},{x:-1,y:0},{x:1,y:0}];return t&&(h=h.concat([{x:-1,y:-1},{x:1,y:-1},{x:-1,y:1},{x:1,y:1}])),h.map(c=>new s(n,{x:e+c.x,y:i+c.y}))},p={DEFAULT:(n,t)=>Math.abs(n.position.x-t.position.x)+Math.abs(n.position.y-t.position.y)},f={DEFAULT:(n,t)=>n.equals(t)},d=99999;class y{constructor(t){r(this,"possibleNodes",[]);r(this,"checkedNodes",[]);r(this,"start");r(this,"end");r(this,"config");r(this,"findPath",()=>{for(;this.possibleNodes.length;){const t=this.checkNode();if(t!=null&&t.path)return t.path}});r(this,"checkNode",()=>{this.possibleNodes.sort((i,h)=>h.f-i.f);const t=this.possibleNodes.pop();if(!t)return;if(this.checkedNodes.push(t),this.config.isDone(t,this.end))return{path:a(t).reverse()};const e=u(t,this.config.diagonal);for(let i of e)this.config.wouldCollide(i)||this.possibleNodes.filter(h=>h.equals(i)).length>0||this.checkedNodes.filter(h=>h.equals(i)).length>0||(i.g=t.g+1,i.h=this.config.heuristic(i,this.end),this.possibleNodes.push(i))});this.config={...t,heuristic:t.heuristic||p.DEFAULT,diagonal:t.diagonal||!1,maxIterations:t.maxIterations||d,isDone:t.isDone||f.DEFAULT},this.start=new s(null,t.startPos),this.end=new s(null,t.endPos),this.possibleNodes.push(this.start)}}const x=(...n)=>new y(...n).findPath();o.PathNode=s,o.findPath=x,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
